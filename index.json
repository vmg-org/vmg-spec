{"swagger":2,"info":{"description":"API specification for VMG project","version":"1.0.0","title":"VMG","termsOfService":"","contact":{"name":"vidmerg@gmail.com"},"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"}},"host":"localhost:3000","basePath":"/api","schemes":["http","https"],"paths":{"/r1000":{"get":{"operationId":"r1000","tags":["auth_issuer"],"summary":"Get auth providers","parameters":[],"responses":{"200":{"description":"Success","schema":{"type":"array","items":{"$ref":"#/definitions/auth_issuer"}}}}}},"/r1001":{"get":{"operationId":"r1001","tags":["movie_template"],"summary":"Get all movie templates","parameters":[],"responses":{"200":{"description":"Success","schema":{"type":"array","items":{"$ref":"#/definitions/movie_template"}}}},"security":{}}},"/r1002":{"get":{"operationId":"r1002","tags":["movie_template"],"summary":"Get a movie_template, including episode_template_arr + episode_bid_count, episode_variant_count for each episode","parameters":[],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/movie_template"}}}}},"/r1003":{"get":{"operationId":"r1003","tags":["user_session"],"summary":"Get user_session, include social_profile_item","parameters":[],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/user_session"}}}}},"/w2000":{"post":{"tags":["movie_template"],"summary":"Create a movie_template with episode_template_arr","parameters":[{"in":"body","name":"body","description":"movie_template with episode_template_arr","schema":{"$ref":"#/definitions/movie_template"},"required":true}],"responses":{"201":{"description":"Success","schema":{"$ref":"#/definitions/movie_template"}},"400":{"description":"Bad request"}},"security":{},"operationId":"w2000"}},"/w2001":{"post":{"tags":["user_session"],"summary":"Create an user session","parameters":[{"in":"body","name":"body","description":"User session","required":true,"schema":{"$ref":"#/definitions/user_session"}}],"operationId":"w2001"}},"/d4000":{"delete":{"tags":["user_session"],"summary":"Log out, remove an user_session","parameters":[{"in":"query","name":"sid","description":"user_session id","required":true}],"responses":{"204":{"description":"Success"}},"security":{},"operationId":"d4000"}}},"definitions":{"movie_template":{"primaryKey":"id","properties":{"id":{"type":"integer","description":"Id of movie template","required":true},"name":{"type":"string","description":"Name of movie (template)","maxLength":255,"minLength":3,"required":true},"duration_of_episodes":{"type":"integer","description":"Duration of each episode","required":true},"preview_img_url":{"type":"string","description":"Preview of the movie","maxLength":2000,"required":true},"created":{"type":"integer","description":"When the template is created, unix timestamp","required":true},"finished":{"type":"integer","description":"When the template is closed, unix timestamp","required":true}}},"episode_template":{"primaryKey":"id","properties":{"id":{"type":"integer","description":"Id of a template of an episode","required":true},"name":{"type":"string","description":"Name of an episode","maxLength":255,"minLength":5,"required":true},"story":{"type":"string","description":"Story of an episode","maxLength":400,"minLength":100,"required":true},"conds":{"type":"string","description":"Conditions, required for snapping this episode","maxLength":255,"required":true},"order_in_movie":{"type":"integer","description":"Sequential order in a movie","required":true},"guide_photo_url":{"type":"string","description":"A photo described this episode","maxLength":2000,"required":true},"id_of_movie_template":{"type":"integer","description":"Id of a parent","zref":{"mdl":"movie_template","fld":"id","del":"cascade"},"required":true}}},"auth_issuer":{"primaryKey":"id","properties":{"id":{"type":"string","maxLength":10,"description":"Id of auth issuer, like goog or fb","required":true},"name":{"type":"string","maxLength":50,"description":"Display name of an issuer, like Google or Facebook","required":true},"url":{"type":"string","maxLength":255,"description":"Main url of an issuer","required":true},"social_profile_arr":{"type":"array","items":{"$ref":"social_profile"}}}},"social_profile":{"primaryKey":"id","properties":{"id":{"type":"string","maxLength":255,"description":"Id of social profile, authIssuer id_SNID","required":true},"snid":{"type":"string","maxLength":250,"description":"Id of social profile in social network","required":true},"id_of_auth_issuer":{"type":"string","maxLength":10,"description":"Id of an issuer from auth_issuer table","zref":{"mdl":"auth_issuer","fld":"id","del":"restrict"},"required":true},"id_of_user_profile":{"type":"integer","description":"Id of user profile","zref":{"mdl":"user_profile","fld":"id","del":"cascade"},"required":true},"display_name":{"type":"string","maxLength":255,"description":"Display name from a social network","required":true},"first_name":{"type":"string","maxLength":255,"description":"First (given) name","required":true},"last_name":{"type":"string","maxLength":255,"description":"Last (family) name","required":true}}},"episode_bid":{"primaryKey":["id_of_episode_template","id_of_user_profile"],"properties":{"id_of_episode_template":{"type":"integer","description":"Id of episode template","required":true},"id_of_user_profile":{"type":"integer","description":"Id of participant, who add this bid","required":true},"created":{"type":"integer","description":"Create date, unix timestamp","required":true}}},"user_profile":{"primaryKey":"id","properties":{"id":{"type":"integer","description":"Id of profile","required":true},"is_blocked":{"type":"boolean","description":"Whether the user is blocked","required":true}}},"user_session":{"primaryKey":"id","properties":{"id":{"type":"string","maxLength":8000,"description":"Id of user session","required":true},"social_token":{"type":"string","maxLength":7990,"description":"Access token, issued by auth provider","required":true},"id_of_social_profile":{"type":"string","maxLength":255,"description":"Id of social profile: iss_snid","zref":{"mdl":"social_profile","fld":"id","del":"cascade"},"required":true},"id_of_auth_issuer":{"type":"string","maxLength":10,"description":"Id of auth issuer, like fb or goog","zref":{"mdl":"auth_issuer","fld":"id","del":"restrict"},"required":true},"expires_at":{"type":"integer","description":"When the token is expired, unix timestamp","required":true},"created":{"type":"integer","description":"When the session is created","required":true}}}}}