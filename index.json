{"swagger":2,"info":{"description":"API specification for VMG project","version":"1.0.0","title":"VMG","termsOfService":"","contact":{"name":"vidmerg@gmail.com"},"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"}},"host":"localhost:3000","basePath":"/api","schemes":["http","https"],"paths":{"/r1000":{"get":{"operationId":"r1000","tags":["auth_issuer"],"summary":"Get auth providers","parameters":[],"responses":{"200":{"description":"Success","schema":{"type":"array","items":{"$ref":"#/definitions/auth_issuer"}}}}}},"/r1001":{"get":{"operationId":"r1001","tags":["movie_template"],"summary":"Get all movie templates","parameters":[],"responses":{"200":{"description":"Success","schema":{"type":"array","items":{"$ref":"#/definitions/movie_template"}}}},"security":{}}},"/r1002":{"get":{"operationId":"r1002","tags":["movie_template"],"summary":"Get a movie_template, including episode_template_arr + episode_bid_count, episode_variant_count for each episode","parameters":[],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/movie_template"}}}}},"/r1003":{"get":{"operationId":"r1003","tags":["user_session"],"summary":"Get user_session, include social_profile_item","parameters":[],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/user_session"}}}}},"/w2000":{"post":{"tags":["movie_template"],"summary":"Create a movie_template with episode_template_arr","parameters":[{"in":"body","name":"body","description":"movie_template with episode_template_arr","schema":{"$ref":"#/definitions/movie_template"},"required":true}],"security":{},"operationId":"w2000"}},"/w2001":{"post":{"tags":["user_session"],"summary":"Create an user session","parameters":[{"in":"body","name":"body","description":"User session","required":true,"schema":{"$ref":"#/definitions/user_session"}}],"operationId":"w2001"}},"/w2002":{"post":{"tags":["episode_variant"],"summary":"Start to create an episode_variant with media_spec with original media file (not yet uploaded)","parameters":[{"in":"body","name":"body","description":"Episode_variant with media_spec with media_file_arr (with one original video) - only mime type as id_of_container_format","required":true,"schema":{"$ref":"#/definitions/episode_variant"}}],"security":{},"operationId":"w2002"}},"/d4000":{"delete":{"tags":["user_session"],"summary":"Log out, remove an user_session","parameters":[{"in":"query","name":"sid","description":"user_session id","required":true}],"responses":{"204":{"description":"Success"}},"security":{},"operationId":"d4000"}}},"definitions":{"auth_issuer":{"primaryKey":"id","properties":{"id":{"type":"string","maxLength":10,"description":"Id of auth issuer, like goog or fb","required":true},"name":{"type":"string","maxLength":50,"description":"Display name of an issuer, like Google or Facebook","required":true},"url":{"type":"string","maxLength":255,"description":"Main url of an issuer","required":true},"social_profile_arr":{"type":"array","items":{"$ref":"social_profile"}}}},"container_format":{"primaryKey":"id","properties":{"id":{"type":"string","description":"Container format abbr","maxLength":25,"required":true},"description":{"type":"string","description":"Format description","maxLength":800,"required":true}}},"episode_bid":{"primaryKey":["id_of_episode_template","id_of_user_profile"],"properties":{"id_of_episode_template":{"type":"integer","description":"Id of episode template","zref":{"mdl":"episode_template","fld":"id","del":"restrict"},"required":true},"id_of_user_profile":{"type":"integer","description":"Id of participant, who add this bid","zref":{"mdl":"user_profile","fld":"id","del":"cascade"},"required":true},"created":{"type":"integer","description":"Create date, unix timestamp","required":true}}},"episode_template":{"primaryKey":"id","properties":{"id":{"type":"integer","description":"Id of a template of an episode","required":true},"name":{"type":"string","description":"Name of an episode","maxLength":255,"minLength":5,"required":true},"story":{"type":"string","description":"Story of an episode","maxLength":400,"minLength":100,"required":true},"conds":{"type":"string","description":"Conditions, required for snapping this episode","maxLength":255,"required":true},"order_in_movie":{"type":"integer","description":"Sequential order in a movie","required":true},"guide_photo_url":{"type":"string","description":"A photo described this episode","maxLength":2000,"required":true},"id_of_movie_template":{"type":"integer","description":"Id of a parent","zref":{"mdl":"movie_template","fld":"id","del":"cascade"},"required":true}}},"episode_variant":{"primaryKey":["id_of_episode_template","id_of_media_spec"],"properties":{"id_of_episode_template":{"type":"integer","description":"Id of episode template","zref":{"mdl":"episode_template","fld":"id","del":"restrict"},"required":true},"id_of_media_spec":{"type":"integer","description":"Id of media spec","zref":{"mdl":"media_spec","fld":"id","del":"restrict"},"required":true},"id_of_user_profile":{"type":"integer","description":"Id of participant, who add this variant","zref":{"mdl":"user_profile","fld":"id","del":"restrict"},"required":true},"created":{"type":"integer","description":"Create date, unix timestamp","required":true},"is_ready":{"type":"boolean","description":"Whether the variant is uploaded and cutted","required":true},"moder_rating":{"type":"integer","description":"Rating of author: 0 - not checked, 1 - bad, 5 - good etc","format":"int16","required":true}}},"media_file":{"primaryKey":"id","properties":{"id":{"type":"integer","description":"Id of a media file with specific multimedia container format","required":true},"id_of_media_spec":{"type":"integer","description":"Id of a media specification","zref":{"mdl":"media_spec","fld":"id","del":"cascade"},"required":true},"id_of_container_format":{"type":"string","description":"Id of a container format","maxLength":25,"zref":{"mdl":"container_format","fld":"id","del":"restrict"},"required":true},"url":{"type":"string","description":"Url to the file","maxLength":2000,"required":true},"url_to_upload":{"type":"string","description":"Url to upload the file, active during 10 seconds","maxLength":2000,"required":true},"size":{"type":"integer","description":"Size in bytes","format":"int64","required":true},"duration":{"type":"integer","format":"int64","description":"Original file and cutted files have diff duration, in milliseconds","required":true},"progress_creation":{"type":"integer","description":"Uploading or conversion","format":"int16","required":true},"progress_cutting":{"type":"integer","description":"Progress of cutting, for original = 100","format":"int16","required":true},"cutting_start":{"type":"integer","description":"Cutting time, start position, in milliseconds, for original = 0","format":"int64","required":true},"cutting_stop":{"type":"integer","description":"Cutting time, stop position, in milliseconds, for original = duration, id duration 0 then 0 (nothing cut)","format":"int64","required":true},"is_original":{"type":"boolean","description":"Whether the media file is original","required":true}}},"media_spec":{"primaryKey":"id","properties":{"id":{"type":"integer","description":"Id of media specification","required":true},"name":{"type":"string","description":"Name of media (from episode name or from an user)","maxLength":255,"required":true},"created":{"type":"integer","description":"Created, unix timestamp","required":true},"preview_img_url":{"type":"string","description":"Image from a video to show as thumbnail","maxLength":3200,"required":true}}},"movie_template":{"primaryKey":"id","properties":{"id":{"type":"integer","description":"Id of movie template","required":true},"name":{"type":"string","description":"Name of movie (template)","maxLength":255,"minLength":3,"required":true},"duration_of_episodes":{"type":"integer","description":"Duration of each episode","required":true},"preview_img_url":{"type":"string","description":"Preview of the movie","maxLength":2000,"required":true},"created":{"type":"integer","description":"When the template is created, unix timestamp","required":true},"finished":{"type":"integer","description":"When the template is closed, unix timestamp","required":true}}},"social_profile":{"primaryKey":"id","properties":{"id":{"type":"string","maxLength":255,"description":"Id of social profile, authIssuer id_SNID","required":true},"snid":{"type":"string","maxLength":250,"description":"Id of social profile in social network","required":true},"id_of_auth_issuer":{"type":"string","maxLength":10,"description":"Id of an issuer from auth_issuer table","zref":{"mdl":"auth_issuer","fld":"id","del":"restrict"},"required":true},"id_of_user_profile":{"type":"integer","description":"Id of user profile","zref":{"mdl":"user_profile","fld":"id","del":"cascade"},"required":true},"display_name":{"type":"string","maxLength":255,"description":"Display name from a social network","required":true},"first_name":{"type":"string","maxLength":255,"description":"First (given) name","required":true},"last_name":{"type":"string","maxLength":255,"description":"Last (family) name","required":true}}},"user_profile":{"primaryKey":"id","properties":{"id":{"type":"integer","description":"Id of profile","required":true},"is_blocked":{"type":"boolean","description":"Whether the user is blocked","required":true}}},"user_session":{"primaryKey":"id","properties":{"id":{"type":"string","maxLength":8000,"description":"Id of user session","required":true},"social_token":{"type":"string","maxLength":7990,"description":"Access token, issued by auth provider","required":true},"id_of_social_profile":{"type":"string","maxLength":255,"description":"Id of social profile: iss_snid","zref":{"mdl":"social_profile","fld":"id","del":"cascade"},"required":true},"id_of_auth_issuer":{"type":"string","maxLength":10,"description":"Id of auth issuer, like fb or goog","zref":{"mdl":"auth_issuer","fld":"id","del":"restrict"},"required":true},"expires_at":{"type":"integer","description":"When the token is expired, unix timestamp","required":true},"created":{"type":"integer","description":"When the session is created","required":true}}}}}